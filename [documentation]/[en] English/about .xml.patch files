.xml.patch files are XML files that tell what to patch in another XML file and how to do it.


=== ADDING (AN) ELEMENT(S) ===

Keep the whole tree above the element(s) and add the element(s) there, just like if it was a stripped down version of the file to patch.
You don't even need to keep any sibiling element. By default, the program will add them at the end, but you can change that (see sorting below).


=== COMMENTING AN ELEMENT ===

Insert commented version of the element; the program will update it.
All matching elements at the tree location will be updated.


=== UNCOMMENTING AN ELEMENT ===

Insert uncommented version of the element; the program will update it.
All matching elements at the tree location will be updated.


=== SORTING ELEMENTS IN ALPHABETICAL ORDER ===

Insert a <sort> tag. It does not need to be at the end, but since sorting is run on all elements after all changes are done, it is adviseable to do so.
WARNING: Only use this feature when all sibling elements are of the same nature (they have the same tag and their sort key is available), otherwise you might end up with weird results or the program migth crash.

<sort key="[key]" prepends="[prepends]"/>
   where:
[key] is the name of the attribute that contains text to be sorted. For the text between the tags, use "_text".
[prepends] is a comma-separated list of key values of an element that must not be sorted and be kept at the beginning.

For example:

<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<floater>
 <combo_box allow_text_entry="true" follows="left|top" height="23" left_pad="10" max_chars="135" mouse_opaque="true" name="translate_language_combo" top_delta="-5" width="190">
  <combo_box.item label="Català (Catalan)" name="Catalan" value="ca" />
  <combo_box.item label="Français canadien (French)" name="Canadian_French" value="fr_CA" />
  <sort key="label" prepends="System Default,English"/>
 </combo_box>
</floater>

The above patch will:

1) Add "Català (Catalan)" and "Français canadien (French)" combo box items;
2) List "System Default" and "English" combo box items, as well as the comments not containing a combo box item;
3) Sort and list all other combo box items by their "label" attribute, including those we added and those that are commented.

Caveats:
- Comments that contain exactly one element will be treated (sort/prepend) just like if they were not commented. The other comments will be automatically prepended.
- Elements with no attributes or no key will be automatically prepended.
- Prepends will appear in the order of the original document.
